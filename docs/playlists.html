<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>My Playlists</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
      body {
        background-color: #f8f9fa;
      }
      .layout {
        display: flex;
        height: calc(100vh - 56px);
      }
      .sidebar {
        width: 280px;
        background: #ffffff;
        border-right: 1px solid #ddd;
        padding: 20px;
      }
      .playlist-item {
        cursor: pointer;
      }
      .playlist-item.active {
        background-color: #e9ecef;
        font-weight: bold;
      }
      .song-card:hover {
        background-color: #f1f3f5;
      }
    </style>
  </head>

  <body>
    <div class="layout">
      <!-- SIDEBAR -->
      <div class="sidebar shadow-sm">
        <h5 class="mb-3">ðŸŽµ My Library</h5>

        <button
          class="btn btn-primary w-100 mb-3"
          data-bs-toggle="modal"
          data-bs-target="#newPlaylistModal"
        >
          + New Playlist
        </button>

        <ul class="list-group mb-3" id="playlistList"></ul>

        <button class="btn btn-success d-none" id="sidebarPlayAllBtn">
          â–¶ Play All
        </button>

        <button class="btn btn-outline-danger w-100" id="deletePlaylistBtn">
          Delete Playlist
        </button>
      </div>

      <!-- MAIN CONTENT -->
      <div class="flex-grow-1 p-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h4 id="playlistTitle">Select a playlist</h4>
        </div>

        <div id="controls" class="d-none mb-3">
          <input
            type="text"
            id="songSearch"
            class="form-control mb-2"
            placeholder="Search in playlist"
          />

          <div class="btn-group">
            <button
              class="btn btn-outline-secondary btn-sm"
              onclick="sortSongs('alpha')"
            >
              Sort Aâ€“Z
            </button>
            <button
              class="btn btn-outline-secondary btn-sm"
              onclick="sortSongs('rating')"
            >
              Sort by Rating
            </button>
          </div>
        </div>

        <div id="songs" class="list-group"></div>
      </div>
    </div>

    <!-- PLAYER MODAL -->
    <div class="modal fade" id="playerModal" tabindex="-1">
      <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body">
            <iframe
              id="playerFrame"
              width="100%"
              height="500"
              frameborder="0"
              allowfullscreen
            >
            </iframe>
          </div>
        </div>
      </div>
    </div>

    <!-- NEW PLAYLIST MODAL -->
    <div class="modal fade" id="newPlaylistModal">
      <div class="modal-dialog">
        <div class="modal-content p-3">
          <h5>New Playlist</h5>
          <input
            type="text"
            id="newPlaylistName"
            class="form-control mb-2"
            placeholder="Playlist name"
          />
          <button class="btn btn-success" onclick="createPlaylist()">
            Create
          </button>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/playlists.js"></script>

    <script>
      requireAuth();
      loadNavbar();
      blockBackNavigation();
    </script>
  </body>
</html>
